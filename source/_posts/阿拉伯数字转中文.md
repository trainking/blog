title: 阿拉伯数字转中文
tags:
    - '算法'
----
## 0x00 引言

最近在做财务系统,突然有个很感兴趣的问题.那就是阿拉伯数字向中文转换.因为会计凭证,关于记账数目的规定,国家有会计法规定.使用到中文显示是必然的,为此突然到要写一个将阿拉伯数字转成中文的算法.

## 0x01 思路

将阿拉伯数字转换为中文,要从我们中文的使用习惯开始.首先,我们的阅读习惯中,是有权位这样的概念的.例如,`10`我们是读作`一十`,这之中`十`便是一个权位.

其次,我们的权位之间是存在一个循环的.例如`10`我们称之为`一十`, 而`100000`我们称之位`一十万`.所以,我们的习惯之中,是存在两重权威循环的.

还有要要考虑的情况,例如`10001`我们会称之为`一万零一`, 而不是`一万零千零百零十零一`, 所以考虑多个连续0的情况的权位选择.

总结下来就是:

 + 需要低阶权位: 十,百,千
 + 需要高阶权位: 万, 亿, 万亿
 + 需要考虑连续0的情况


 ## 0x02 实现
 python实现:

 ```
 # coding=utf-8

 # 映射元组
 NUM_CHINESE = ("零", "一", "二", "三", "四", "五", "六", "七", "八", "九")
 # 低阶权位
 M_POINT = ("", "十", "百", "千")
 # 高阶权位
 C_POINT = ("", "万", "亿", "万亿")

 def numberToChinese(num):
     result = ""
     upoint = 0  # 权位的下标
     needZero = False # 判断千位是否为0
     while num > 0:
         seletion = num % 10000
         if needZero:
             result = NUM_CHINESE[0] + result
         needZero = seletion < 1000 and seletion > 0
         seletion = seletionToChinese(seletion)
         result = seletion + C_POINT[upoint] + result
         num = num / 10000
         upoint += 1

     return result

 # 低阶权位转换
 def seletionToChinese(seletion):
     result = ""
     upoint = 0
     zero = True # 控制是否连续0

     while seletion > 0:
         v = seletion % 10
         if v == 0:
             if not zero or seletion == 0:
                 zero = True
                 result = NUM_CHINESE[0] + result
         else :
             zero = False
             result = NUM_CHINESE[v] + M_POINT[upoint] + result

         seletion = seletion / 10
         upoint += 1

     return result

 if __name__ == '__main__':
     print numberToChinese(10000)
 ```

 我的一开始是用js写的,就不贴出来了.我觉得还是python的比较简单直白好理解一点.

 ## 0x03 总结
 这个算法,存在以下几个缺点:
  + 最大直到了万亿的表示级别,因为我国GDP也仅仅是万亿级别,所以财务上用没问题
  + 没有写小数位数的处理,这个要拓展,只需要依样画葫芦了
  + 我所使用的中文字符,是简体小写支付,而非记账用的大写字符,这个只要替换就可以了

我发现思路中,高阶权位的处理和低阶权位处理类似.能否简化二者之间的代码呢?我还没想到好的方式.
